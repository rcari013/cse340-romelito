<section class="appointment-admin">
  <h1>Test Drive Appointment Management</h1>

  <table class="employee-appointment-table admin-table">
    <thead>
      <tr>
        <th>Customer</th>
        <th>Vehicle</th>
        <th>Date</th>
        <th>Time</th>
        <th>Status</th>
        <th>Update</th>
      </tr>
    </thead>

    <tbody>
      <% appointments.forEach(a => { %>
      <tr>
        <td><%= a.account_firstname %> <%= a.account_lastname %></td>
        <td><%= a.inv_make %> <%= a.inv_model %></td>
        <td><%= a.appointment_date.toISOString().split("T")[0] %></td>
        <td><%= a.appointment_time %></td>

        <td class="status <%= a.status %>"><%= a.status %></td>

        <td  id="status-appointment">
          <form action="/appointment/status/<%= a.appointment_id %>" method="POST">
            <select name="status" required>
              <option value="pending" <%= a.status === "pending" ? "selected" : "" %> >Pending</option>
              <option value="approved" <%= a.status === "approved" ? "selected" : "" %> >Approved</option>
              <option value="completed" <%= a.status === "completed" ? "selected" : "" %> >Completed</option>
              <option value="cancelled" <%= a.status === "cancelled" ? "selected" : "" %> >Cancelled</option>
            </select>
            <button type="submit">Update</button>
          </form>
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>
</section>
